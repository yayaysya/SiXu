# 闪卡确认恢复与任务托盘

## 上下文
- 闪卡确认弹窗 `ConfirmFlashcardsModal` 在点击遮罩时消失且无恢复入口。
- 现有 `StatusBarManager` 仅展示进度，无“未完成任务”托盘。

## 目标
- 在状态栏右下角常驻任务图标，点击弹出一个小面板列出未完成任务。
- 在闪卡确认流程中注册“可恢复任务”，点击“继续”能重新打开 `confirm-flashcards-modal` 并完成保存。

## 方案
- 新增 `PendingTaskManager` 管理可恢复任务（内存级），包含状态栏图标、角标、弹出面板与增删操作。
- 在两处生成闪卡后展示确认弹窗的调用点注册任务，`resume()` 再次 new 并 open 对话框；保存成功后移除任务。

## 实施步骤
1. types 扩展：`ResumeTaskItem`（id/title/subtitle/kind/createdAt/resume/cancel）。
2. 新建 `src/ui/PendingTaskManager.ts`：
   - 状态栏图标与计数角标
   - 弹出面板渲染、外点击关闭
   - `addTask/removeTask/hasTasks`
3. `main.ts` 初始化托盘：
   - `this.pendingTaskManager = new PendingTaskManager(this.app, this.addStatusBarItem())`
4. 接入恢复点：
   - `src/flashcard/FlashcardDeckView.ts` 创建卡组流程
   - `src/views/combineView.ts` 组合视图生成流程
5. 样式：`styles.css` 追加 `.nb-task-tray`、`.nb-task-popover` 等。

## 预期结果
- 误关确认弹窗后，可通过任务图标→任务面板点击“继续”恢复弹窗；保存完成后条目自动消失。

